<h1 class="text-center mb-4">Order Management</h1>

<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h3 class="text-primary mb-3 my-3">Orders</h3>
            <div class="filter-container">
                <%= form_with url: admin_dashboard_path, method: :get, local: true, class: "form-inline" do %>
                <div class="form-group mx-2">
                    <%= select_tag :filter, options_for_select([['New First', 'new_first'], ['Old First', 'old_first'], ['Fulfilled', 'fulfilled'], ['Delivered', 'delivered'], ['By ID', 'by_id']], params[:filter]), class: "form-control filter-dropdown" %>
                </div>
                <%= submit_tag 'Filter', class: "btn btn-primary filter-btn my-2" %>
                <% end %>
            </div>

            <% if @orders.present? %>
            <div class="table-responsive my-3">
                <table class="table table-striped table-bordered w-100">
                    <thead class="thead-dark">
                        <tr>
                            <th>Order ID</th>
                            <th>Products</th>
                            <th>User</th>
                            <th>Total Price</th>
                            <th>Status</th>
                            <th>Order Address</th>
                            <th>Phone Number</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% @orders.each do |order| %>
                        <tr>
                            <td><%= order.id %></td>
                            <td><%= order.product.product_title || 'No product' %></td>
                            <td><%= order.email || "No Email" %></td>
                            <td><%= number_to_currency(order.total_price) %></td>
                            <td id="order-status-<%= order.id %>"><%= display_order_status(order.status) %></td>
                            <td><%= order.address || "No Address" %></td>
                            <td><%= order.phone || "No Number" %></td>
                            <td id="order-actions-<%= order.id %>">
                                <%= display_order_actions(order) %>
                            </td>
                        </tr>
                        <% end %>
                    </tbody>

                </table>
            </div>
            <%= paginate_orders(@orders) %>
            <% else %>
            <p class="alert alert-warning">No orders found.</p>
            <% end %>
        </div>
    </div>
</div>